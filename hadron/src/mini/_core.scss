/*
  Browsers resets and base typography.
*/

// TODO: Add fluid type and test thoroughly










$secondary-back-color:    #f0f0f0 !default;     // Secondary background color
$blockquote-color:        #f57c00 !default;     // <blockquote> sidebar and quotation color
$pre-color:               #1565c0 !default;     // <pre> sidebar color
$border-color:            #aaa !default;        // Border color
$secondary-border-color:  #ddd !default;        // Secondary border color

$main-padding: 0.5rem !default; // Universal padding for the most elements


$universal-border-radius: 0.125rem !default;    // Universal border-radius for most elements
$universal-box-shadow:    none !default;        // Universal box-shadow for most elements

$bold-font-weight:        700 !default;         // Font weight for <b> and <strong>
$horizontal-rule-line-height:  1.25em !default; // <hr> line height
$blockquote-quotation-size:    3rem !default;   // Font size for the quotation of <blockquote>
$blockquote-cite-size:         0.75em !default; // Font size for the [cite] of <blockquote>
$code-font-family: 'Menlo, Consolas, monospace' !default; // Font stack for code elements
$code-font-size:           0.85em !default;     // Font size for <code>, <kbd>
$small-element-font-size:     0.75em !default;  // Font size for <small>, <sub>, <sup>
$sup-top:                  -0.5em !default;     // <sup> top
$sub-bottom:               -0.25em !default;    // <sub> bottom
$a-link-color:             #0277bd !default;    // Color for <a>:link
$a-visited-color:          #01579b !default;    // Color for <a>:visited
// CSS variable name definitions [exercise caution if modifying these]
$fore-color-var:                '--fore-color' !default;
$secondary-fore-color-var:      '--secondary-fore-color' !default;
$back-color-var:                '--back-color' !default;
$secondary-back-color-var:      '--secondary-back-color' !default;
$blockquote-color-var:          '--blockquote-color' !default;
$pre-color-var:                 '--pre-color' !default;
$border-color-var:              '--border-color' !default;
$secondary-border-color-var:    '--secondary-border-color' !default;



$universal-border-radius-var:   '--universal-border-radius' !default;
$universal-box-shadow-var:      '--universal-box-shadow' !default;
$a-link-color-var:              '--a-link-color' !default;
$a-visited-color-var:           '--a-visited-color' !default;
/* Core module CSS variable definitions */
:root {

    #{$secondary-fore-color-var}: $secondary-fore-color;

    #{$secondary-back-color-var}: $secondary-back-color;
    #{$blockquote-color-var}: $blockquote-color;
    #{$pre-color-var}: $pre-color;
    #{$border-color-var}: $border-color;
    #{$secondary-border-color-var}: $secondary-border-color;


    #{$universal-border-radius-var}: $universal-border-radius;
    #{$a-link-color-var}: $a-link-color;
    #{$a-visited-color-var}: $a-visited-color;
    @if $universal-box-shadow != none {
        #{$universal-box-shadow-var}: $universal-box-shadow;
    }
}



a, b, del, em, i, ins, q, span, strong, u {
  font-size: 1em; // Fix for elements inside headings not displaying properly.
}





// Correct display for Edge & Firefox.
details {
  display: block;
}

// Correct display in all browsers.
summary {
  display: list-item;
}

// Abbreviations
abbr[title] {
  border-bottom: none;           // Remove bottom border in Firefox 39-.
  text-decoration: underline dotted;  // Opinionated style-fix for all browsers.
}

// Show overflow in Edge.
input {
  overflow: visible;
}

// Make images responsive by default.
img {
  max-width: 100%;
  height: auto;
}


p {
  margin: var(#{$universal-margin-var});
}

ol, ul {
  margin: var(#{$universal-margin-var});
  padding-left: calc(2 * var(#{$universal-margin-var}));
}

b, strong {
  font-weight: $bold-font-weight;
}

hr {
  // Fixes and defaults for styling
  box-sizing: content-box;
  border: 0;
  // Actual styling using variables
  line-height: $horizontal-rule-line-height;
  margin: var(#{$universal-margin-var});
  height: $__1px;
  background: linear-gradient(to right, transparent, var(#{$border-color-var}) 20%, var(#{$border-color-var}) 80%, transparent);
}

blockquote {  // Doesn't have a back color by default, can be added manually.
  display: block;
  position: relative;
  font-style: italic;
  color: var(#{$secondary-fore-color-var});
  margin: var(#{$universal-margin-var});
  padding: calc(3 * var(#{$universal-padding-var}));
  border: $__1px solid var(#{$secondary-border-color-var});
  border-left: 6*$__1px solid var(#{$blockquote-color-var});
  border-radius: 0 var(#{$universal-border-radius-var}) var(#{$universal-border-radius-var}) 0;
  @if $universal-box-shadow != none {
    box-shadow: var(#{$universal-box-shadow-var});
  }
  &:before {
    position: absolute;
    top: calc(0rem - var(#{$universal-padding-var}));
    left: 0;
    font-family: sans-serif;
    font-size: $blockquote-quotation-size;
    font-weight: 700;
    content: "\201c";
    color: var(#{$blockquote-color-var});
  }
  &[cite]:after{
    font-style: normal;
    font-size: $blockquote-cite-size;
    font-weight: 700;
    content: "\a—  " attr(cite);
    white-space: pre;
  }
}

code, kbd, pre, samp {
  font-family: #{$code-font-family};     // Display fix should be applied manually!
  font-size: $code-font-size;
}

code { // No border color by default and fore color is the default for text, can be altered manually.
  background: var(#{$secondary-back-color-var});
  border-radius: var(#{$universal-border-radius-var});
  // This could be a bit counterintuitive and burden the codebase a bit, look into it again?
  padding: calc(var(#{$universal-padding-var}) / 4) calc(var(#{$universal-padding-var}) / 2);
  @if $universal-box-shadow != none {
    box-shadow: var(#{$universal-box-shadow-var});
  }
}

kbd { // No border color by default, can be altered manually.
  background: var(#{$fore-color-var});
  color: var(#{$back-color-var});
  border-radius: var(#{$universal-border-radius-var});
  // This could be a bit counterintuitive and burden the codebase a bit, look into it again?
  padding: calc(var(#{$universal-padding-var}) / 4) calc(var(#{$universal-padding-var}) / 2);
  @if $universal-box-shadow != none {
    box-shadow: var(#{$universal-box-shadow-var});
  }
}

pre { // Fore color is the default, can be altered manually.
  overflow: auto; // Responsiveness
  background: var(#{$secondary-back-color-var});
  padding: calc(1.5 * var(#{$universal-padding-var}));
  margin: var(#{$universal-margin-var});
  border: $__1px solid var(#{$secondary-border-color-var});
  border-left: 4*$__1px solid var(#{$pre-color-var});
  border-radius: 0 var(#{$universal-border-radius-var}) var(#{$universal-border-radius-var}) 0;
  @if $universal-box-shadow != none {
    box-shadow: var(#{$universal-box-shadow-var});
  }
}

// Prevent elements from affecting the line height in all browsers.
sup, sub, code, kbd {
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}

small, sup, sub, figcaption {
  font-size: $small-element-font-size;
}

sup {
  top: $sup-top;
}
sub {
  bottom: $sub-bottom;
}

figure {
  margin: var(#{$universal-margin-var});
}
figcaption {
    color: var(#{$secondary-fore-color-var});
}

a {
  font-family: inherit;
  font-size: inherit;
  text-decoration: none;
  &:link{
    color: var(#{$a-link-color-var});
  }
  &:visited {
    color: var(#{$a-visited-color-var});
  }
  &:not(.button):hover, &:not(.button):focus {
      // La boite à bouillons
      //  1. Comment: text-decoration...
      //  2. Add: box-shadow...
      //  3. Add: :not(.button) property
    // text-decoration: underline;
    box-shadow: 0 2px;
  }
}
